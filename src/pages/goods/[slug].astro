---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { renderBadges } from '../../utils/renderBadges';

export async function getStaticPaths() {
  const goods = await getCollection('goods');

  return goods.map((entry) => ({
    params: { slug: entry.data.permalink },
    props: { entry }
  }));
}

const { entry } = Astro.props;
const pageTitle = `Glenn Weatherson - ${entry.data.title}`;
---

<Layout pageTitle={pageTitle}>

<article>
  <a href="/goods/" class="back button">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M416 160C416 147.1 408.2 135.4 396.2 130.4C384.2 125.4 370.5 128.2 361.3 137.3L201.3 297.3C188.8 309.8 188.8 330.1 201.3 342.6L361.3 502.6C370.5 511.8 384.2 514.5 396.2 509.5C408.2 504.5 416 492.9 416 480L416 160z"/></svg>

    Back to all Goods
  </a>

  <h1>{entry.data.title}</h1>
  <h4>{entry.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: '2-digit' })}</h4>
  <div set:html={renderBadges(entry.rendered?.html ?? "")} />
</article>

<style scoped>
  .back {
    margin-block-end: var(--space-m);
  }
</style>